#!/usr/bin/env python
# -*- coding: utf-8 -*-
"""
ç§»åŠ¨å¾…åˆ é™¤æ–‡ä»¶è„šæœ¬ï¼ˆç›´æ¥è¿è¡Œç‰ˆæœ¬ï¼‰
ç”¨é€”ï¼šå°†å»ºè®®åˆ é™¤çš„æ–‡ä»¶ç§»åŠ¨åˆ°"å¾…åˆ é™¤æ–‡ä»¶"æ–‡ä»¶å¤¹
ä½¿ç”¨æ–¹æ³•ï¼šç›´æ¥åœ¨Python IDEä¸­è¿è¡Œæ­¤è„šæœ¬
"""

import os
import shutil
from pathlib import Path

# è®¾ç½®å·¥ä½œç›®å½•ä¸ºè„šæœ¬æ‰€åœ¨ç›®å½•çš„çˆ¶ç›®å½•
BASE_DIR = Path(__file__).parent.parent
os.chdir(BASE_DIR)

# å¾…åˆ é™¤æ–‡ä»¶ç›®å½•
DELETE_DIR = BASE_DIR / "å¾…åˆ é™¤æ–‡ä»¶"

# å¾…åˆ é™¤æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰
FILES_TO_DELETE = [
    # P0çº§åˆ«ï¼šå¤‡ä»½æ–‡ä»¶ï¼ˆå·²è¿ç§»åˆ°Skillåº“ï¼‰
    # "å·¥ä½œè®°å½•ç³»ç»Ÿ/éœ€æ±‚ç†è§£æ¨¡æ¿.md",  # å·²ç§»åŠ¨
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/å†…å®¹ç”Ÿæˆæ¨¡æ¿.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/è´¨é‡æ£€æŸ¥æ¸…å•.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/å·¥ä½œæµç¨‹ä¼˜åŒ–æ–¹æ¡ˆ_V3.0.md",
    
    # P0çº§åˆ«ï¼šæ—§ç‰ˆæœ¬æ£€æŸ¥æŠ¥å‘Š
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/RAGçŸ¥è¯†åº“è´¨é‡æ£€æŸ¥æŠ¥å‘Š_20260103.md",
    "RAGçŸ¥è¯†åº“/RAGçŸ¥è¯†åº“å®Œæ•´æ£€æŸ¥æŠ¥å‘Š_2026-01-03.md",
    "RAGçŸ¥è¯†åº“/RAGçŸ¥è¯†åº“å…¨é¢é—®é¢˜æ£€æŸ¥æŠ¥å‘Š_2026-01-03.md",
    "RAGçŸ¥è¯†åº“/ä¸šåŠ¡é€»è¾‘å…¨é¢æ£€æŸ¥æŠ¥å‘Š_2026-01-03.md",
    "å†…å®¹è¿è´¯æ€§ä¸é€»è¾‘æ¼æ´æ£€æŸ¥æŠ¥å‘Š_2026-01-03.md",
    "RAGçŸ¥è¯†åº“/RAGçŸ¥è¯†åº“é‡å¤§é—®é¢˜æ£€æŸ¥æŠ¥å‘Š.md",
    
    # P0çº§åˆ«ï¼šæ—§ç‰ˆæœ¬å·¥ä½œæµç¨‹æŒ‡å—
    "RAGçŸ¥è¯†åº“/Agentå·¥ä½œæµç¨‹æŒ‡å—/00_Agentå·¥ä½œæµç¨‹æ€»æŒ‡å—.md",
    "RAGçŸ¥è¯†åº“/Agentå·¥ä½œæµç¨‹æŒ‡å—/01_æ¯æ—¥å·¥ä½œæµç¨‹SOP.md",
    
    # P0çº§åˆ«ï¼šé€å­—ç¨¿æ—§ç‰ˆæœ¬
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day1_ç ´å†°å½’å› /02_å®Œæ•´é€å­—ç¨¿_å†…éƒ¨ç‰ˆ.md",
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day1_ç ´å†°å½’å› /02_å®Œæ•´é€å­—ç¨¿_æ–°ç‰ˆ_V2.0.md",
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day1_ç ´å†°å½’å› /02_å®Œæ•´é€å­—ç¨¿_è¶…çº§å®Œæ•´ç‰ˆ_V3.0DAY1.md",
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day2_æ ¸å¿ƒé€¼å•/02_å®Œæ•´é€å­—ç¨¿_æ–°ç‰ˆ_V2.0.md",
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day2_æ ¸å¿ƒé€¼å•/02_å®Œæ•´é€å­—ç¨¿_è¶…çº§å®Œæ•´ç‰ˆ_V3.0DAY2.md",
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day3_ç­”ç–‘æ¸…å°¾/02_å®Œæ•´é€å­—ç¨¿_æ–°ç‰ˆ_V2.0.md",
    "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day3_ç­”ç–‘æ¸…å°¾/02_å®Œæ•´é€å­—ç¨¿_è¶…çº§å®Œæ•´ç‰ˆ_V3.0DAY3.md",
    
    # P1çº§åˆ«ï¼šæµ‹è¯•å’Œæ¼”ç¤ºæ–‡ä»¶
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/å·¥ä½œæ–¹å¼ä¼˜åŒ–ç³»ç»Ÿæµ‹è¯•æŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/å·¥å…·ä½¿ç”¨æ¼”ç¤º.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/è‡ªåŠ¨åŒ–è„šæœ¬ä½¿ç”¨æ¼”ç¤º.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/è‡ªåŠ¨åŒ–è„šæœ¬å®æˆ˜æ¼”ç¤º.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/è‡ªåŠ¨åŒ–è„šæœ¬æ¼”ç¤ºæ€»ç»“.md",
    
    # P1çº§åˆ«ï¼šé‡å¤çš„å®ŒæˆæŠ¥å‘Š
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/P1ä»»åŠ¡å¤„ç†å®ŒæˆæŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/RAGçŸ¥è¯†åº“è´¨é‡æå‡å®ŒæˆæŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/RAGçŸ¥è¯†åº“P1P2çº§åˆ«é—®é¢˜å¤„ç†å®ŒæˆæŠ¥å‘Š.md",
    
    # P1çº§åˆ«ï¼šæ—§ç‰ˆæœ¬çš„ä¿®å¤æŠ¥å‘Š
    "RAGçŸ¥è¯†åº“/ä¿®å¤å®ŒæˆæŠ¥å‘Š_2026-01-03.md",
    "RAGçŸ¥è¯†åº“/ä¿®å¤è¿›åº¦æŠ¥å‘Š_2026-01-03.md",
    "RAGçŸ¥è¯†åº“/ä¼˜åŒ–ä¿®å¤å®ŒæˆæŠ¥å‘Š_2026-01-03.md",
    
    # P2çº§åˆ«ï¼šå…¶ä»–å®ŒæˆæŠ¥å‘Š
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/ä¼˜åŒ–æ–¹æ¡ˆå®æ–½è¿›åº¦æŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/ç¬¬äºŒé˜¶æ®µå®æ–½å®ŒæˆæŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/ä¼˜åŒ–å·¥å…·åˆ›å»ºå®ŒæˆæŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/å·¥ä½œæ–¹å¼ä¼˜åŒ–é›†æˆå®ŒæˆæŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/RAGçŸ¥è¯†åº“ç‰ˆæœ¬å†²çªå¤„ç†æŠ¥å‘Š.md",
    "å·¥ä½œè®°å½•ç³»ç»Ÿ/RAGçŸ¥è¯†åº“æŒç»­ä¼˜åŒ–æœºåˆ¶.md",
]

def create_directories():
    """åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„"""
    print("ğŸ“ åˆ›å»ºç›®å½•ç»“æ„...")
    
    # åˆ›å»ºä¸»ç›®å½•
    DELETE_DIR.mkdir(exist_ok=True)
    
    # åˆ›å»ºå­ç›®å½•
    subdirs = [
        "å·¥ä½œè®°å½•ç³»ç»Ÿ",
        "RAGçŸ¥è¯†åº“",
        "RAGçŸ¥è¯†åº“/Agentå·¥ä½œæµç¨‹æŒ‡å—",
        "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“",
        "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day1_ç ´å†°å½’å› ",
        "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day2_æ ¸å¿ƒé€¼å•",
        "RAGçŸ¥è¯†åº“/04_ç›´æ’­è¯¾ç¨‹åº“/Day3_ç­”ç–‘æ¸…å°¾",
    ]
    
    for subdir in subdirs:
        dir_path = DELETE_DIR / subdir
        dir_path.mkdir(parents=True, exist_ok=True)
        print(f"  âœ… {subdir}")
    
    print("âœ… ç›®å½•ç»“æ„åˆ›å»ºå®Œæˆ\n")

def move_files():
    """ç§»åŠ¨æ–‡ä»¶åˆ°å¾…åˆ é™¤æ–‡ä»¶å¤¹"""
    print("ğŸ“¦ å¼€å§‹ç§»åŠ¨æ–‡ä»¶...\n")
    
    moved_count = 0
    not_found_count = 0
    error_count = 0
    
    for file_path in FILES_TO_DELETE:
        source = BASE_DIR / file_path
        target = DELETE_DIR / file_path
        
        if not source.exists():
            print(f"  âš ï¸  æœªæ‰¾åˆ°ï¼š{file_path}")
            not_found_count += 1
            continue
        
        try:
            # ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨
            target.parent.mkdir(parents=True, exist_ok=True)
            
            # ç§»åŠ¨æ–‡ä»¶
            shutil.move(str(source), str(target))
            print(f"  âœ… å·²ç§»åŠ¨ï¼š{file_path}")
            moved_count += 1
        except Exception as e:
            print(f"  âŒ ç§»åŠ¨å¤±è´¥ï¼š{file_path} - {str(e)}")
            error_count += 1
    
    print(f"\nğŸ“Š ç§»åŠ¨ç»Ÿè®¡ï¼š")
    print(f"  âœ… æˆåŠŸç§»åŠ¨ï¼š{moved_count} ä¸ªæ–‡ä»¶")
    print(f"  âš ï¸  æœªæ‰¾åˆ°ï¼š{not_found_count} ä¸ªæ–‡ä»¶")
    print(f"  âŒ ç§»åŠ¨å¤±è´¥ï¼š{error_count} ä¸ªæ–‡ä»¶")
    print(f"  ğŸ“‹ æ€»è®¡ï¼š{len(FILES_TO_DELETE)} ä¸ªæ–‡ä»¶")
    
    return moved_count, not_found_count, error_count

def create_readme():
    """åˆ›å»ºREADMEè¯´æ˜æ–‡ä»¶"""
    readme_content = """# å¾…åˆ é™¤æ–‡ä»¶

## ã€è¯´æ˜ã€‘
æ­¤æ–‡ä»¶å¤¹åŒ…å«å»ºè®®åˆ é™¤çš„æ–‡ä»¶ï¼Œå·²ä»åŸä½ç½®ç§»åŠ¨åˆ°æ­¤æ–‡ä»¶å¤¹ã€‚

## ã€åˆ é™¤å»ºè®®ã€‘
1. **å…ˆæ£€æŸ¥**ï¼šç¡®è®¤æ–‡ä»¶å·²ä¸å†éœ€è¦
2. **å†åˆ é™¤**ï¼šç¡®è®¤åå¯ä»¥åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹
3. **ä¿ç•™å¤‡ä»½**ï¼šå¦‚æœéœ€è¦ï¼Œå¯ä»¥å…ˆå¤‡ä»½é‡è¦æ–‡ä»¶

## ã€æ–‡ä»¶åˆ†ç±»ã€‘
- P0çº§åˆ«ï¼š17ä¸ªæ–‡ä»¶ï¼ˆå¼ºçƒˆå»ºè®®åˆ é™¤ï¼‰
- P1çº§åˆ«ï¼š8ä¸ªæ–‡ä»¶ï¼ˆå¯ä»¥åˆ é™¤ï¼‰
- P2çº§åˆ«ï¼š6ä¸ªæ–‡ä»¶ï¼ˆå¯é€‰åˆ é™¤ï¼‰

## ã€è¯¦ç»†æ¸…å•ã€‘
è¯·æŸ¥çœ‹ï¼š`å·¥ä½œè®°å½•ç³»ç»Ÿ/å»ºè®®åˆ é™¤æ–‡ä»¶æ¸…å•.md`

---
**åˆ›å»ºæ—¶é—´**ï¼š2026-01-04
"""
    
    readme_path = DELETE_DIR / "README.md"
    with open(readme_path, 'w', encoding='utf-8') as f:
        f.write(readme_content)
    print(f"\nğŸ“ å·²åˆ›å»ºREADMEï¼š{readme_path}")

def main():
    """ä¸»å‡½æ•°"""
    print("=" * 60)
    print("ğŸ“¦ ç§»åŠ¨å¾…åˆ é™¤æ–‡ä»¶è„šæœ¬")
    print("=" * 60)
    print()
    
    # åˆ›å»ºç›®å½•ç»“æ„
    create_directories()
    
    # ç§»åŠ¨æ–‡ä»¶
    moved_count, not_found_count, error_count = move_files()
    
    # åˆ›å»ºREADME
    create_readme()
    
    print("\n" + "=" * 60)
    print("âœ… æ–‡ä»¶ç§»åŠ¨å®Œæˆï¼")
    print("=" * 60)
    print(f"\nğŸ“ å¾…åˆ é™¤æ–‡ä»¶ä½ç½®ï¼š{DELETE_DIR}")
    print("ğŸ’¡ å»ºè®®ï¼šæ£€æŸ¥æ–‡ä»¶åï¼Œç¡®è®¤ä¸å†éœ€è¦å†åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹")
    
    if moved_count > 0:
        print(f"\nâœ… æˆåŠŸç§»åŠ¨ {moved_count} ä¸ªæ–‡ä»¶åˆ°å¾…åˆ é™¤æ–‡ä»¶å¤¹")
    if not_found_count > 0:
        print(f"âš ï¸  æœ‰ {not_found_count} ä¸ªæ–‡ä»¶æœªæ‰¾åˆ°ï¼ˆå¯èƒ½å·²åˆ é™¤ï¼‰")
    if error_count > 0:
        print(f"âŒ æœ‰ {error_count} ä¸ªæ–‡ä»¶ç§»åŠ¨å¤±è´¥")

if __name__ == "__main__":
    main()

