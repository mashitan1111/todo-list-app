# 第二阶段（P1级别）工具使用说明

## 【元数据】
- **创建日期**：2026-01-03
- **版本**：V1.0

---

## 🎯 AI主动预判系统

### 功能说明
AI主动预判用户需求，提前准备方案。

### 使用方式

#### 方式1：直接执行（推荐）
```bash
cd 圆心工作/工具脚本
python AI主动预判系统.py
```

#### 方式2：集成到AI工作流程
```python
from AI主动预判系统 import predict_user_needs

# 预判用户需求
result = predict_user_needs()

# 获取预判结果
predictions = result['predictions']
suggestions = result['suggestions']
report = result['report']
```

### 输出文件
- **预判报告**：`工作记录系统/AI预判记录.md`
- **预判结果**：控制台输出
- **建议方案**：JSON格式

### 预判维度
1. **阻塞任务**：识别阻塞其他任务的任务
2. **P0级别任务**：识别高优先级待处理任务
3. **P1级别任务**：识别重要待处理任务
4. **进行中任务**：识别需要继续推进的任务

### 示例输出
```
🔍 开始分析工作上下文和任务清单...
📊 分析最近完成的任务...
   发现 8 个最近完成的任务
📊 分析进行中的任务...
   发现 0 个进行中的任务
📊 分析待处理的任务...
   发现 6 个待处理的任务
📊 分析任务依赖关系...
   发现 2 个任务有依赖关系
📊 识别阻塞任务...
   发现 1 个阻塞任务
🎯 预测下一步任务...
   生成 3 个预判结果

✅ 已保存预判报告：工作记录系统/AI预判记录.md
```

---

## 🔧 智能任务分解系统

### 功能说明
自动任务分解和依赖管理。

### 使用方式

#### 方式1：分析现有任务
```bash
cd 圆心工作/工具脚本
python 智能任务分解系统.py
```

#### 方式2：分解新任务
```bash
cd 圆心工作/工具脚本
python 智能任务分解系统.py "检查RAG知识库"
```

#### 方式3：集成到AI工作流程
```python
from 智能任务分解系统 import decompose_and_analyze

# 分析现有任务
result = decompose_and_analyze()

# 分解新任务
result = decompose_and_analyze(task_description="检查RAG知识库")

# 获取分解结果
dependencies = result['dependencies']
critical_tasks = result['critical_tasks']
parallel_groups = result['parallel_groups']
execution_order = result['execution_order']
blocked_tasks = result['blocked_tasks']
```

### 输出文件
- **分解报告**：`工作记录系统/任务分解记录.md`
- **分解结果**：控制台输出
- **执行顺序**：优化后的任务执行顺序

### 分解维度
1. **任务类型**：检查、修复、创建、优化
2. **子任务**：根据任务类型自动分解
3. **依赖关系**：识别任务之间的依赖
4. **关键路径**：找到最长执行路径
5. **并行任务**：识别可并行执行的任务

### 示例输出
```
🔍 开始任务分解和分析...

📊 分析任务依赖关系...
   发现 10 个任务

📊 构建依赖图...
   依赖图构建完成

📊 查找关键路径...
   关键路径长度：5
   关键任务：TASK-001, TASK-002, TASK-003

📊 识别可并行执行的任务...
   发现 3 个并行组
   并行组1：2个任务可以并行执行

📊 优化执行顺序...

📊 识别阻塞任务...
   发现 1 个阻塞任务

✅ 已保存任务分解报告：工作记录系统/任务分解记录.md
```

---

## 📊 集成示例

### 场景：AI对话开始时

```python
# 1. AI主动预判用户需求
from AI主动预判系统 import predict_user_needs
predictions = predict_user_needs()

# 2. 根据预判结果主动提供建议
if predictions['predictions']:
    print("根据工作上下文分析，建议优先处理以下任务：")
    for pred in predictions['predictions']:
        print(f"- {pred['message']}")

# 3. 等待用户确认
user_input = input("是否执行建议的任务？(y/n): ")
if user_input == 'y':
    # 执行任务
    pass
```

### 场景：AI接收新任务时

```python
# 1. 智能任务分解
from 智能任务分解系统 import decompose_and_analyze
result = decompose_and_analyze(task_description="检查RAG知识库")

# 2. 显示分解结果
print(f"任务类型：{result['task_type']}")
print(f"子任务：{result['subtasks']}")

# 3. 检查依赖关系
if result['blocked_tasks']:
    print("警告：发现阻塞任务")
    for task in result['blocked_tasks']:
        print(f"- {task['task_id']}: {task['reason']}")

# 4. 优化执行顺序
print("优化后的执行顺序：")
for item in result['execution_order']:
    if isinstance(item, tuple) and item[0] == 'parallel':
        print(f"并行执行：{item[1]}")
    else:
        print(f"顺序执行：{item}")
```

---

## ⚠️ 注意事项

1. **PowerShell编码问题**
   - 当前PowerShell存在编码问题，无法直接执行脚本
   - 建议使用Python IDE或命令行直接执行
   - 或等待PowerShell编码问题解决

2. **文件路径**
   - 所有文件路径使用相对路径
   - 确保在正确的工作目录执行

3. **依赖关系**
   - 需要先完成第一阶段（P0级别）任务
   - 需要工作上下文和任务清单文件存在

---

**最后更新**：2026-01-03
**版本**：V1.0

